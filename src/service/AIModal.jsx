import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
  
   export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Dubai , for 3 Days for Couple with a  Cheap budget, Give me a Hotels options list with Hotel Name , Hotel address ,Price, hotel image url , geo coordinates, rating, descriptions and suggest itinerary with place Name ,Place Details, Place Image Url, Geo Coordinates, ticket Pricing ,rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a JSON-formatted travel plan for a budget-friendly 3-day trip to Dubai for a couple, including hotel options and a detailed itinerary.  This plan focuses on affordable experiences and efficient use of time.\n\n```json\n{\n  \"tripName\": \"Dubai Budget Getaway for Two\",\n  \"duration\": \"3 Days\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"currency\": \"USD\",\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"City Avenue Hotel\",\n      \"hotelAddress\": \"Opposite Deira City Centre, Port Saeed, Deira, Dubai, United Arab Emirates\",\n      \"price\": 40,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/22/f4/c5/8a/exterior.jpg?w=900&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 25.2597,\n        \"longitude\": 55.3345\n      },\n      \"rating\": 4,\n      \"description\": \"A well-located hotel offering comfortable rooms, a rooftop pool, and easy access to the metro. Great value for money.\"\n    },\n    {\n      \"hotelName\": \"Golden Tulip Deira\",\n      \"hotelAddress\": \"Al Muteena, Deira, Dubai, United Arab Emirates\",\n      \"price\": 35,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/24/07/2d/36/golden-tulip-deira.jpg?w=700&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 25.2676,\n        \"longitude\": 55.3226\n      },\n      \"rating\": 3.5,\n      \"description\": \"Offers a convenient location in Deira, comfortable accommodations, and basic amenities. A budget-friendly choice.\"\n    },\n      {\n      \"hotelName\": \"Premier Inn Dubai Al Jaddaf\",\n      \"hotelAddress\": \"Al Jaddaf, Dubai, United Arab Emirates\",\n      \"price\": 50,\n      \"hotelImageUrl\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-s/1b/2c/5e/19/premier-inn-dubai-al.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 25.2175,\n        \"longitude\": 55.3381\n      },\n      \"rating\": 4.2,\n      \"description\": \"Modern hotel with good connections to the city.  Known for cleanliness and friendly service.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Old Dubai & Creek Exploration\",\n      \"bestTimeToVisit\": \"Morning & Late Afternoon\",\n      \"places\": [\n        {\n          \"placeName\": \"Al Fahidi Historical Neighbourhood (Bastakiya)\",\n          \"placeDetails\": \"Explore the narrow lanes, traditional wind-tower architecture, art galleries, and cafes of this historic district.\",\n          \"placeImageUrl\": \"https://www.visitdubai.com/-/media/gathercontent/article/a/al-fahidi-historical-neighbourhood/media/al-fahidi-historical-neighbourhood-walking-tour.jpg?mw=960&hash=283F277A760D1F50F1965D19E9D4B655\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.2636,\n            \"longitude\": 55.3005\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"travelTimeFromHotel\": \"15-20 minutes by taxi/metro from Deira hotels\",\n          \"duration\": \"2-3 hours\"\n        },\n        {\n          \"placeName\": \"Abra Ride across Dubai Creek\",\n          \"placeDetails\": \"Experience a traditional Abra ride for just AED 1 (approx. $0.27) across the Dubai Creek.  Enjoy the views of the old city.\",\n          \"placeImageUrl\": \"https://www.visitdubai.com/-/media/gathercontent/poi/a/abra-creek-crossing/media/abra-creek-crossing-dubai-1-14-may-2023.jpg?mw=960&hash=450888155B56440931E2B1D50B72D8E4\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.2644,\n            \"longitude\": 55.3028\n          },\n          \"ticketPricing\": \"AED 1 (approx. $0.27)\",\n          \"rating\": 4.3,\n          \"travelTimeFromPrevious\": \"5 minutes walking\",\n          \"duration\": \"30 minutes\"\n        },\n        {\n          \"placeName\": \"Dubai Spice Souk\",\n          \"placeDetails\": \"Immerse yourselves in the vibrant colors and aromas of the Spice Souk. Bargain for spices, herbs, and traditional products.\",\n          \"placeImageUrl\": \"https://www.visitdubai.com/-/media/gathercontent/poi/d/dubai-spice-souk/media/dubai-spice-souk-dtcm-14-may-2023.jpg?mw=960&hash=5A7C489F49E2A2367A7C69768A262C22\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.2684,\n            \"longitude\": 55.3006\n          },\n          \"ticketPricing\": \"Free (Cost of purchases)\",\n          \"rating\": 4.0,\n          \"travelTimeFromPrevious\": \"5 minutes walking\",\n          \"duration\": \"1-2 hours\"\n        },\n        {\n          \"placeName\": \"Dubai Gold Souk\",\n          \"placeDetails\": \"Marvel at the dazzling displays of gold jewelry at the Gold Souk. Even if you don't buy anything, it's a sight to see.\",\n          \"placeImageUrl\": \"https://www.visitdubai.com/-/media/gathercontent/poi/d/dubai-gold-souk/media/dubai-gold-souk-dtcm-14-may-2023.jpg?mw=960&hash=0E5E8F296E0B81F40745271C62C1E53C\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.2695,\n            \"longitude\": 55.2999\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.2,\n          \"travelTimeFromPrevious\": \"2 minutes walking\",\n          \"duration\": \"1-2 hours\"\n        },\n         {\n          \"placeName\": \"Dinner at a Local Eatery in Deira\",\n          \"placeDetails\": \"Enjoy a delicious and affordable dinner at a local restaurant in Deira. Try authentic Emirati or Indian cuisine.\",\n          \"placeImageUrl\": \"https://i.pinimg.com/originals/82/f3/5a/82f35a12b42d8a15c46f01968e8877b3.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.2695,\n            \"longitude\": 55.2999\n          },\n          \"ticketPricing\": \"10-15\",\n          \"rating\": 4.2,\n          \"travelTimeFromPrevious\": \"2 minutes walking\",\n          \"duration\": \"1-2 hours\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Modern Dubai & Free Attractions\",\n      \"bestTimeToVisit\": \"Afternoon & Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Dubai Mall\",\n          \"placeDetails\": \"Visit the world-famous Dubai Mall. Window shopping is free!  See the Dubai Fountain show in the evening.\",\n          \"placeImageUrl\": \"https://www.visitdubai.com/-/media/gathercontent/poi/d/dubai-mall/media/dubai-mall-dtcm-30-october-2023.jpg?mw=960&hash=C86F9C9F495B5808B99942B840153911\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.1972,\n            \"longitude\": 55.2796\n          },\n          \"ticketPricing\": \"Free (except for attractions inside)\",\n          \"rating\": 4.6,\n          \"travelTimeFromHotel\": \"20-30 minutes by metro from Deira\",\n          \"duration\": \"3-4 hours\"\n        },\n        {\n          \"placeName\": \"Dubai Fountain Show\",\n          \"placeDetails\": \"Witness the spectacular Dubai Fountain show outside the Dubai Mall.  Shows run every 30 minutes in the evening.\",\n          \"placeImageUrl\": \"https://www.visitdubai.com/-/media/gathercontent/poi/d/dubai-fountain/media/dubai-fountain-dtcm-30-october-2023.jpg?mw=960&hash=714A21F9373D7D1A6717708191F53114\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.1971,\n            \"longitude\": 55.2795\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.7,\n          \"travelTimeFromPrevious\": \"Walking distance from inside Dubai Mall\",\n          \"duration\": \"30 minutes - 1 hour (for multiple shows)\"\n        },\n        {\n          \"placeName\": \"Souk Madinat Jumeirah\",\n          \"placeDetails\": \"Explore this modern souk with a traditional Arabian ambiance.  Enjoy views of the Burj Al Arab.  Free to enter; shopping costs extra.\",\n          \"placeImageUrl\": \"https://www.jumeirah.com/-/mediadh/dh/destinations/dubai/madinat-jumeirah/souk-madinat-jumeirah/souk-madinat-jumeirah-overview/souk-madinat-jumeirah-desktop.jpg?w=1920\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.1328,\n            \"longitude\": 55.1881\n          },\n          \"ticketPricing\": \"Free (except for purchases/dining)\",\n          \"rating\": 4.4,\n          \"travelTimeFromPrevious\": \"15-20 minutes by taxi from Dubai Mall\",\n          \"duration\": \"2-3 hours\"\n        },\n                {\n          \"placeName\": \"Jumeirah Beach\",\n          \"placeDetails\": \"Relax and enjoy the sunset at Jumeirah Beach, with the iconic Burj Al Arab in the backdrop. \",\n          \"placeImageUrl\": \"https://www.arabianbusiness.com/cloud/2023/05/11/Jumeirah-Beach-Hotel-719x430.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.1412,\n            \"longitude\": 55.1862\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.4,\n          \"travelTimeFromPrevious\": \"5-10 minutes by taxi from Souk Madinat Jumeirah\",\n          \"duration\": \"1-2 hours\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Desert Vibes & Budget Experiences\",\n      \"bestTimeToVisit\": \"Afternoon & Evening\",\n      \"places\": [\n\n        {\n          \"placeName\": \"Desert Safari (Budget Option)\",\n          \"placeDetails\": \"Look for deals on budget-friendly desert safaris that include dune bashing, camel riding, and a traditional dinner with entertainment.  Book in advance online for better prices.  Check Groupon or Cobone for discounts.\",\n          \"placeImageUrl\": \"https://www.visitdubai.com/-/media/gathercontent/experience/d/desert-safari-dubai/media/dubai-desert-safari-dtcm-2023.jpg?mw=960&hash=4979D1ED7F11386B37B14D3879A12883\",\n          \"geoCoordinates\": {\n            \"latitude\": 24.9667,\n            \"longitude\": 55.5167\n          },\n          \"ticketPricing\": \"Varies (search for deals around $30-$50 per person)\",\n          \"rating\": 4.3,\n          \"travelTimeFromHotel\": \"1-hour drive from Deira (pickup included in most tours)\",\n          \"duration\": \"5-6 hours\"\n        },\n          {\n          \"placeName\": \"Global Village\",\n          \"placeDetails\": \"Experience cultures from around the world at Global Village, an entertainment and shopping destination with pavilions representing various countries.  It's open seasonally (usually October to April).\",\n          \"placeImageUrl\": \"https://www.visitdubai.com/-/media/gathercontent/poi/g/global-village/media/global-village-dubai-dtcm-30-october-2023.jpg?mw=960&hash=58B974F37688DE3B365C1471DA4F6750\",\n          \"geoCoordinates\": {\n            \"latitude\": 25.0767,\n            \"longitude\": 55.4167\n          },\n          \"ticketPricing\": \"AED 25 (approx. $7)\",\n          \"rating\": 4.5,\n          \"travelTimeFromPrevious\": \"30 minutes drive from Desert\",\n          \"duration\": \"3-4 hours\"\n        }\n      ]\n    }\n  },\n  \"importantNotes\": [\n    \"Purchase a Nol Card for easy and affordable travel on the Dubai Metro and buses.\",\n    \"Dress respectfully, especially when visiting religious sites or traditional areas.\",\n    \"Stay hydrated, especially during the hotter months.\",\n    \"Bargain when shopping at the souks.\",\n    \"Check for free events and activities happening during your visit.\",\n    \"Consider purchasing a data SIM card for easy access to maps and information.\"\n  ]\n}\n```\n\n**Explanation and Important Considerations:**\n\n*   **JSON Format:**  The data is structured as a JSON object with keys for overall trip information, hotel options, and a detailed itinerary for each day.\n*   **Hotel Options:**  I've provided a few hotel options in the Deira area, known for being more budget-friendly. The prices are estimates and can vary depending on the season and booking platform.  *Always check current prices on booking websites before making a reservation.* The Premier Inn is slightly more expensive but offers a reliable standard.\n*   **Itinerary:**\n    *   **Day 1 (Old Dubai & Creek Exploration):** This focuses on the historical part of Dubai, which is very accessible and doesn't require expensive tickets.  The Abra ride is a must-do!\n    *   **Day 2 (Modern Dubai & Free Attractions):**  This day includes the Dubai Mall and Dubai Fountain, which are free to visit (though you might spend money on food or shopping). Souk Madinat Jumeirah offers great photo opportunities with the Burj Al Arab.  Ending the day at Jumeirah Beach is perfect.\n    *   **Day 3 (Desert Vibes & Budget Experiences):**  A desert safari is a quintessential Dubai experience. I've suggested looking for budget options. *Read reviews carefully before booking.* Global Village, if open during your visit, is a great cultural experience.\n*   **Ticket Pricing:**  Ticket prices are estimates and can change. Always check official websites for the most up-to-date information.  Many activities are free!\n*   **Travel Time:** Travel times are estimates and depend on traffic and your mode of transportation.  The Dubai Metro is generally the most efficient and affordable way to get around.\n*   **Ratings:** Ratings are based on general online reviews and are for guidance only.\n*   **Best Time to Visit:** Dubai is hot for much of the year.  The best time to visit is generally from **November to March** when the weather is milder.\n*   **Budget Considerations:**\n    *   **Food:** Eat at local restaurants and food stalls in Deira for affordable meals.  Avoid tourist traps.\n    *   **Transportation:** Use the Dubai Metro as much as possible.\n    *   **Activities:** Focus on free or low-cost activities.\n    *   **Negotiating:** Bargain for prices at the souks.\n*   **Customization:**  This is just a starting point.  Feel free to customize it based on your interests and preferences.  Research specific restaurants and activities that appeal to you.\n*    **Visa:** check visa requirement for your nationality before travelling\n\nRemember to book flights and accommodation in advance, especially if traveling during peak season, to secure better deals.  Have a fantastic trip!\n"},
          ],
        },
      ],
    });
  
   
  
  
  